"use strict";function BarChart(t,a,e,r){var i=this;i.configureChart(t,a,e,r),i.performPreOperations(),i.drawChart()}function getRandomInt(t,a){return t=Math.ceil(t),a=Math.floor(a),Math.floor(Math.random()*(a-t))+t}BarChart.prototype.configureChart=function(t,a,e,r){var i=this;i.setCanvasParameters(t,a,e,r),i.setChartParameters()},BarChart.prototype.setCanvasParameters=function(t,a,e,r){var i=this;i.id=t,i.width=a,i.height=e,i.data=r},BarChart.prototype.setChartParameters=function(){var t=this;t.axisRatio=10,t.verticalMargin=t.height*t.axisRatio/100,t.horizontalMargin=t.width*t.axisRatio/100,t.axisColor="#b1b1b1",t.axisWidth=.75,t.fontRatio=3,t.fontFamily="times",t.fontStyle="normal",t.fontWeight="300",t.fontColor="#666",t.verticalFontSize=t.height*t.fontRatio/100,t.horizontalFontSize=t.width*t.fontRatio/100,t.guidelineColor="#e5e5e5",t.guidelineWidth=.5},BarChart.prototype.performPreOperations=function(){var t=this;t.createCanvas(),t.handleData(),t.preapareData()},BarChart.prototype.createCanvas=function(){var t=this,a=document.createElement("canvas");a.id=t.id+"-"+Math.random(),a.width=t.width,a.height=t.height,document.getElementById(t.id).innerHTML="",document.getElementById(t.id).appendChild(a),t.canvas=a,t.context=a.getContext("2d")},BarChart.prototype.handleData=function(){var t=this;t.labels=[],t.values=[],t.data.forEach(function(a){t.labels.push(a.label),t.values.push(a.value)})},BarChart.prototype.preapareData=function(){var t=this;t.itemsNum=t.data.length,t.maxValue=Math.max.apply(null,t.values),t.minValue=Math.min.apply(null,t.values),t.verticalAxisWidth=t.height-2*t.verticalMargin,t.horizontalAxisWidth=t.width-2*t.horizontalMargin,t.verticalUpperBound=10*Math.ceil(t.maxValue/10),t.verticalLabelFreq=t.verticalUpperBound/t.itemsNum,t.horizontalLabelFreq=t.horizontalAxisWidth/t.itemsNum},BarChart.prototype.drawChart=function(){var t=this;t.drawVerticalAxis(),t.drawVerticalLabels(),t.drawHorizontalAxis(),t.drawHorizontalLabels(),t.drawHorizontalGuidelines(),t.drawVerticalGuidelines(),t.drawBars()},BarChart.prototype.drawVerticalAxis=function(){var t=this;t.context.beginPath(),t.context.strokeStyle=t.axisColor,t.context.lineWidth=t.axisWidth,t.context.moveTo(t.horizontalMargin,t.verticalMargin),t.context.lineTo(t.horizontalMargin,t.height-t.verticalMargin),t.context.stroke()},BarChart.prototype.drawVerticalLabels=function(){var t=this,a=t.fontStyle+" "+t.fontWeight+" "+t.verticalFontSize+"px "+t.fontFamily;t.context.font=a,t.context.textAlign="right",t.context.fillStyle=t.fontColor;for(var e=t.verticalAxisWidth/t.verticalUpperBound*t.verticalLabelFreq,r=0;r<=t.itemsNum;r++){var i=t.verticalUpperBound-r*t.verticalLabelFreq,o=t.horizontalMargin-t.horizontalMargin/t.axisRatio,n=t.verticalMargin+r*e;t.context.fillText(i,o,n)}},BarChart.prototype.drawHorizontalAxis=function(){var t=this;t.context.beginPath(),t.context.strokeStyle=t.axisColor,t.context.lineWidth=t.axisWidth,t.context.moveTo(t.horizontalMargin,t.height-t.verticalMargin),t.context.lineTo(t.width-t.horizontalMargin,t.height-t.verticalMargin),t.context.stroke()},BarChart.prototype.drawHorizontalLabels=function(){var t=this,a=t.fontStyle+" "+t.fontWeight+" "+t.verticalFontSize+"px "+t.fontFamily;t.context.font=a,t.context.textAlign="center",t.context.textBaseline="top",t.context.fillStyle=t.fontColor;for(var e=0;e<t.itemsNum;e++){var r=t.horizontalMargin+e*t.horizontalLabelFreq+t.horizontalLabelFreq/2,i=t.height-t.verticalMargin+t.verticalMargin/t.axisRatio;t.context.fillText(t.labels[e],r,i)}},BarChart.prototype.drawHorizontalGuidelines=function(){var t=this;t.context.strokeStyle=t.guidelineColor,t.context.lineWidth=t.guidelineWidth;for(var a=t.verticalAxisWidth/t.verticalUpperBound*t.verticalLabelFreq,e=0;e<=t.itemsNum;e++){var r=t.horizontalMargin,i=t.verticalMargin+e*a,o=t.horizontalMargin+t.horizontalAxisWidth,n=t.verticalMargin+e*a;t.context.beginPath(),t.context.moveTo(r,i),t.context.lineTo(o,n),t.context.stroke()}},BarChart.prototype.drawVerticalGuidelines=function(){var t=this;t.context.strokeStyle=t.guidelineColor,t.context.lineWidth=t.guidelineWidth;for(var a=0;a<=t.itemsNum;a++){var e=t.horizontalMargin+a*t.horizontalLabelFreq,r=t.height-t.verticalMargin,i=t.horizontalMargin+a*t.horizontalLabelFreq,o=t.verticalMargin;t.context.beginPath(),t.context.moveTo(e,r),t.context.lineTo(i,o),t.context.stroke()}},BarChart.prototype.drawBars=function(){for(var t=this,a=0;a<t.itemsNum;a++){var e=t.createRandomRGBColor(),r="rgba("+e.r+", "+e.g+", "+e.b+", 0.3)",i="rgba("+e.r+", "+e.g+", "+e.b+")";t.context.beginPath();var o=t.horizontalMargin+a*t.horizontalLabelFreq+t.horizontalLabelFreq/t.axisRatio,n=t.height-t.verticalMargin,l=t.horizontalLabelFreq-2*t.horizontalLabelFreq/t.axisRatio,h=-1*t.verticalAxisWidth*t.values[a]/t.maxValue;t.context.fillStyle=r,t.context.strokeStyle=i,t.context.rect(o,n,l,h),t.context.stroke(),t.context.fill()}},BarChart.prototype.createRandomRGBColor=function(){return{r:getRandomInt(0,257),g:getRandomInt(0,257),b:getRandomInt(0,257)}};
